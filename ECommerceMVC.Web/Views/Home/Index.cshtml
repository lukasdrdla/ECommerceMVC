@model HomeIndexViewModel
@{
    ViewData["Title"] = "Domů - EShop";
}

<!-- Hero Slider - Full Width -->
<section class="hero-slider-fullwidth">
    <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            @for (int i = 0; i < Model.SliderItems.Count(); i++)
            {
                <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="@i" 
                        class="@(i == 0 ? "active" : "")" aria-current="@(i == 0 ? "true" : "false")" 
                        aria-label="Slide @(i + 1)"></button>
            }
        </div>
        <div class="carousel-inner">
            @foreach (var (item, index) in Model.SliderItems.Select((item, index) => (item, index)))
            {
                <div class="carousel-item @(index == 0 ? "active" : "")">
                    <div class="slider-content-fullwidth" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('@item.ImageUrl');">
                        <div class="container">
                            <div class="row align-items-center min-vh-80">
                                <div class="col-lg-6">
                                    <div class="hero-text text-white">
                                        <h1 class="display-2 fw-bold mb-4">@item.Title</h1>
                                        <p class="lead mb-5 fs-4">@item.Subtitle</p>
                                        <a href="@item.ButtonUrl" class="btn btn-primary btn-xl px-5 py-4 fs-5">
                                            @item.ButtonText
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>

<!-- Features Section -->
<section class="content-section features-section bg-light">
    <div class="container">
        <div class="row">
            <div class="col-md-3 text-center">
                <div class="feature-item">
                    <i class="fas fa-shipping-fast fa-3x text-primary mb-3"></i>
                    <h5>Rychlé doručení</h5>
                    <p class="text-muted">Doprava zdarma od 1000 Kč</p>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <div class="feature-item">
                    <i class="fas fa-undo-alt fa-3x text-primary mb-3"></i>
                    <h5>30 dní na vrácení</h5>
                    <p class="text-muted">Vrácení zboží bez udání důvodu</p>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <div class="feature-item">
                    <i class="fas fa-headset fa-3x text-primary mb-3"></i>
                    <h5>24/7 Podpora</h5>
                    <p class="text-muted">Jsme tu pro vás kdykoliv</p>
                </div>
            </div>
            <div class="col-md-3 text-center">
                <div class="feature-item">
                    <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                    <h5>Bezpečné platby</h5>
                    <p class="text-muted">SSL šifrování všech plateb</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
@if (Model.FeaturedProducts?.Any() == true)
{
    <section class="content-section featured-products">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Doporučujeme</h2>
                <p class="section-subtitle text-muted">Nejlepší produkty vybrané speciálně pro vás</p>
            </div>
            <div class="row">
                @foreach (var product in Model.FeaturedProducts.Take(4))
                {
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="product-card h-100">
                            <div class="product-image">
                                <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                    @if (product.Images?.Any() == true)
                                    {
                                        <img src="@product.Images.First().ImageUrl" alt="@product.Name" class="img-fluid">
                                    }
                                    else
                                    {
                                        <div class="no-image">
                                            <i class="fas fa-image fa-3x text-muted"></i>
                                        </div>
                                    }
                                </a>
                                @if (product.IsHomePageFeatured)
                                {
                                    <span class="product-badge featured">TOP</span>
                                }
                            </div>
                            <div class="product-info">
                                <h5 class="product-name">
                                    <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                        @product.Name
                                    </a>
                                </h5>
                                <p class="product-description">@product.Description</p>
                                <div class="product-price">
                                    @if (product.Variants?.Any() == true)
                                    {
                                        var minPrice = product.Variants.Min(v => v.Price);
                                        var maxPrice = product.Variants.Max(v => v.Price);
                                        
                                        @if (minPrice == maxPrice)
                                        {
                                            <span class="price-current">@minPrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ"))</span>
                                        }
                                        else
                                        {
                                            <span class="price-current">@minPrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ")) - @maxPrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ"))</span>
                                        }
                                    }
                                </div>
                                <div class="product-actions">
                                    <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id" class="btn btn-primary btn-sm">
                                        Zobrazit detail
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="text-center mt-4">
                <a asp-controller="Product" asp-action="Index" class="btn btn-outline-primary btn-lg">
                    Zobrazit všechny produkty
                </a>
            </div>
        </div>
    </section>
}

<!-- Categories Section -->
@if (Model.TopCategories?.Any() == true)
{
    <section class="content-section categories-section bg-light">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Nakupujte podle kategorií</h2>
                <p class="section-subtitle text-muted">Objevte naši širokou nabídku produktů</p>
            </div>
            <div class="row">
                @foreach (var category in Model.TopCategories.Take(6))
                {
                    <div class="col-lg-2 col-md-4 col-6 mb-4">
                        <div class="category-card text-center">
                            <a asp-controller="Product" asp-action="Index" asp-route-categoryId="@category.Id">
                                <div class="category-icon">
                                    <i class="fas fa-tag fa-3x text-primary mb-3"></i>
                                </div>
                                <h6 class="category-name">@category.Name</h6>
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- New Products -->
@if (Model.NewProducts?.Any() == true)
{
    <section class="content-section new-products">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Novinky</h2>
                <p class="section-subtitle text-muted">Nejnovější produkty v naší nabídce</p>
            </div>
            <div class="row">
                @foreach (var product in Model.NewProducts.Take(4))
                {
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="product-card h-100">
                            <div class="product-image">
                                <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                    @if (product.Images?.Any() == true)
                                    {
                                        <img src="@product.Images.First().ImageUrl" alt="@product.Name" class="img-fluid">
                                    }
                                    else
                                    {
                                        <div class="no-image">
                                            <i class="fas fa-image fa-3x text-muted"></i>
                                        </div>
                                    }
                                </a>
                                <span class="product-badge new">NOVINKA</span>
                            </div>
                            <div class="product-info">
                                <h5 class="product-name">
                                    <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                        @product.Name
                                    </a>
                                </h5>
                                <div class="product-price">
                                    @if (product.Variants?.Any() == true)
                                    {
                                        var minPrice = product.Variants.Min(v => v.Price);
                                        <span class="price-current">@minPrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ"))</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Sale Products -->
@if (Model.SaleProducts?.Any() == true)
{
    <section class="content-section sale-products bg-danger text-white">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Slevy a akce</h2>
                <p class="section-subtitle">Ušetřete na vybraných produktech</p>
            </div>
            <div class="row">
                @foreach (var product in Model.SaleProducts.Take(4))
                {
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="product-card sale-card h-100">
                            <div class="product-image">
                                <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                    @if (product.Images?.Any() == true)
                                    {
                                        <img src="@product.Images.First().ImageUrl" alt="@product.Name" class="img-fluid">
                                    }
                                    else
                                    {
                                        <div class="no-image">
                                            <i class="fas fa-image fa-3x text-muted"></i>
                                        </div>
                                    }
                                </a>
                                <span class="product-badge sale">SLEVA</span>
                            </div>
                            <div class="product-info">
                                <h5 class="product-name">
                                    <a asp-controller="Product" asp-action="Details" asp-route-id="@product.Id">
                                        @product.Name
                                    </a>
                                </h5>
                                <div class="product-price">
                                    @if (product.Variants?.Any() == true)
                                    {
                                        var originalPrice = product.Variants.First().Price;
                                        var salePrice = originalPrice * 0.8m; // 20% sleva
                                        <span class="price-original">@originalPrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ"))</span>
                                        <span class="price-sale">@salePrice.ToString("C", new System.Globalization.CultureInfo("cs-CZ"))</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Featured Brands -->
@if (Model.FeaturedBrands?.Any() == true)
{
    <section class="content-section brands-section">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Naše značky</h2>
                <p class="section-subtitle text-muted">Spolupracujeme s nejlepšími značkami na trhu</p>
            </div>
            <div class="row align-items-center">
                @foreach (var brand in Model.FeaturedBrands.Take(6))
                {
                    <div class="col-lg-2 col-md-3 col-4 mb-4">
                        <div class="brand-item text-center">
                            <a asp-controller="Product" asp-action="Index" asp-route-brandId="@brand.Id">
                                <h6 class="brand-name">@brand.Name</h6>
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Newsletter Section -->
<section class="content-section newsletter-section bg-dark text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h3 class="mb-3">Přihlaste se k odběru novinek</h3>
                <p class="mb-0">Získejte exkluzivní slevy a buďte první, kdo se dozví o nových produktech</p>
            </div>
            <div class="col-lg-6">
                <div class="newsletter-form">
                    <div class="input-group">
                        <input type="email" class="form-control" placeholder="Váš email">
                        <button class="btn btn-primary" type="button">Přihlásit se</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
